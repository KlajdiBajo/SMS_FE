<!-- course-form.component.html -->
<div
  *ngIf="isOpen"
  class="course-form-backdrop"
  (mousedown)="onBackdropClick($event)"
>
  <ion-card class="course-form-card" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="course-form-header">
      <ion-card-title>{{
        course ? "Edit Course" : "Add New Course"
      }}</ion-card-title>
      <ion-button
        fill="clear"
        class="course-form-close-btn"
        (click)="onCancel()"
      >
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <!-- Form Content -->
    <ion-card-content>
      <form
        [formGroup]="courseForm"
        (ngSubmit)="onSubmit()"
        class="course-form-form"
      >
        <!-- Course Code -->
        <ion-item>
          <ion-label position="stacked">Course Code *</ion-label>
          <ion-input
            formControlName="code"
            placeholder="e.g., CS301"
            [class.error]="hasError('code')"
          >
          </ion-input>
          <div *ngIf="hasError('code')" class="error-message">
            {{ getErrorMessage("code") }}
          </div>
        </ion-item>

        <!-- Course Title -->
        <ion-item>
          <ion-label position="stacked">Course Title *</ion-label>
          <ion-input
            formControlName="title"
            placeholder="Enter course title"
            [class.error]="hasError('title')"
          >
          </ion-input>
          <div *ngIf="hasError('title')" class="error-message">
            {{ getErrorMessage("title") }}
          </div>
        </ion-item>

        <!-- Description -->
        <ion-item>
          <ion-label position="stacked">Description</ion-label>
          <ion-textarea
            formControlName="description"
            placeholder="Enter course description"
            rows="2"
          >
          </ion-textarea>
        </ion-item>

        <!-- Year -->
        <ion-item>
          <ion-label position="stacked">Year *</ion-label>
          <ion-input
            type="number"
            formControlName="year"
            placeholder="e.g., 2024"
            min="1900"
            max="2100"
            [class.error]="hasError('year')"
          >
          </ion-input>
          <div *ngIf="hasError('year')" class="error-message">
            {{ getErrorMessage("year") }}
          </div>
        </ion-item>

        <!-- Action Buttons -->
        <div class="course-form-actions">
          <ion-button
            type="submit"
            color="primary"
            expand="block"
            [disabled]="courseForm.invalid"
          >
            {{ course ? "Update Course" : "Add Course" }}
          </ion-button>
          <ion-button
            type="button"
            fill="outline"
            expand="block"
            (click)="onCancel()"
          >
            Cancel
          </ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>
</div>
